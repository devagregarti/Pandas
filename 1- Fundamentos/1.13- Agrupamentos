ğŸ§© AGRUPAMENTO DE DADOS NO PANDAS (GROUPBY)

Agrupar significa juntar linhas que tÃªm algo em comum (por exemplo, mesma cidade, categoria ou vendedor) e calcular algum tipo de resumo (como mÃ©dia, soma, contagem, etc.). No Pandas isso Ã© feito com o mÃ©todo df.groupby().

â¸»

ğŸ“˜ 1. Estrutura bÃ¡sica

Sintaxe geral:
df.groupby(â€œcoluna_chaveâ€)[â€œcoluna_valorâ€].funÃ§Ã£o()
	â€¢	â€œcoluna_chaveâ€ â†’ define o grupo (ex: cidade, categoria)
	â€¢	â€œcoluna_valorâ€ â†’ campo numÃ©rico (ex: vendas, idade)
	â€¢	funÃ§Ã£o() â†’ operaÃ§Ã£o como mean(), sum(), count(), max(), min()

â¸»

ğŸ§± 2. Exemplo prÃ¡tico

import pandas as pd
df = pd.DataFrame({
â€œCidadeâ€: [â€œSÃ£o Pauloâ€, â€œRioâ€, â€œSÃ£o Pauloâ€, â€œCuritibaâ€, â€œRioâ€, â€œCuritibaâ€],
â€œVendedorâ€: [â€œAnaâ€, â€œBrunoâ€, â€œCarlosâ€, â€œAnaâ€, â€œBrunoâ€, â€œCarlosâ€],
â€œVendasâ€: [1000, 800, 1200, 700, 900, 600]
})

Tabela original:
Cidade | Vendedor | Vendas
SÃ£o Paulo | Ana | 1000
Rio | Bruno | 800
SÃ£o Paulo | Carlos | 1200
Curitiba | Ana | 700
Rio | Bruno | 900
Curitiba | Carlos | 600

â¸»

ğŸ”¹ 3. Agrupando por uma coluna

MÃ©dia de vendas por cidade:
df.groupby(â€œCidadeâ€)[â€œVendasâ€].mean()

Resultado:
Curitiba 650.0
Rio 850.0
SÃ£o Paulo 1100.0

â¸»

ğŸ”¹ 4. Agrupando e somando

Soma de vendas por cidade:
df.groupby(â€œCidadeâ€)[â€œVendasâ€].sum()

Resultado:
Curitiba 1300
Rio 1700
SÃ£o Paulo 2200

â¸»

ğŸ”¹ 5. Agrupar por mais de uma coluna

df.groupby([â€œCidadeâ€, â€œVendedorâ€])[â€œVendasâ€].sum()

Resultado:
Curitiba - Ana: 700
Curitiba - Carlos: 600
Rio - Bruno: 1700
SÃ£o Paulo - Ana: 1000
SÃ£o Paulo - Carlos: 1200

â¸»

ğŸ”¹ 6. Resetando o Ã­ndice

Para voltar o agrupamento ao formato normal de tabela:
df.groupby(â€œCidadeâ€)[â€œVendasâ€].sum().reset_index()

Resultado:
Cidade | Vendas
Curitiba | 1300
Rio | 1700
SÃ£o Paulo | 2200

â¸»

ğŸ”¹ 7. MÃºltiplas funÃ§Ãµes com agg()

df.groupby(â€œCidadeâ€)[â€œVendasâ€].agg([â€œmeanâ€, â€œsumâ€, â€œmaxâ€, â€œminâ€])

Resultado:
Cidade | mean | sum | max | min
Curitiba | 650.0 | 1300 | 700 | 600
Rio | 850.0 | 1700 | 900 | 800
SÃ£o Paulo | 1100.0 | 2200 | 1200 | 1000

â¸»

ğŸ”¹ 8. FunÃ§Ãµes diferentes em vÃ¡rias colunas

df.groupby(â€œCidadeâ€).agg({â€œVendasâ€: [â€œsumâ€, â€œmeanâ€], â€œVendedorâ€: â€œcountâ€})

Resultado:
Cidade | Vendas_sum | Vendas_mean | Vendedor_count
Curitiba | 1300 | 650 | 2
Rio | 1700 | 850 | 2
SÃ£o Paulo | 2200 | 1100 | 2

â¸»

ğŸ”¹ 9. Ordenando o resultado

df.groupby(â€œCidadeâ€)[â€œVendasâ€].sum().sort_values(ascending=False)

Resultado:
SÃ£o Paulo 2200
Rio 1700
Curitiba 1300

â¸»

ğŸ”¹ 10. Nomeando colunas apÃ³s agrupamento

agrupado = df.groupby(â€œCidadeâ€)[â€œVendasâ€].sum().reset_index()
agrupado.columns = [â€œCidadeâ€, â€œTotal_Vendasâ€]

Resultado:
Cidade | Total_Vendas
Curitiba | 1300
Rio | 1700
SÃ£o Paulo | 2200

â¸»

ğŸ”¹ 11. Contando registros por grupo

df.groupby(â€œCidadeâ€)[â€œVendasâ€].count()

Resultado:
Curitiba 2
Rio 2
SÃ£o Paulo 2

â¸»

ğŸ”¹ 12. Aplicando funÃ§Ãµes personalizadas

def faixa(valor):
return â€œAltaâ€ if valor.mean() > 900 else â€œBaixaâ€
df.groupby(â€œCidadeâ€)[â€œVendasâ€].apply(faixa)

Resultado:
Curitiba Baixa
Rio Baixa
SÃ£o Paulo Alta

â¸»

ğŸ§­ 13. Resumo rÃ¡pido

AÃ§Ã£o | Exemplo | DescriÃ§Ã£o
MÃ©dia por grupo | df.groupby(â€œCidadeâ€)[â€œVendasâ€].mean() | MÃ©dia das vendas por cidade
Soma por grupo | df.groupby(â€œCidadeâ€)[â€œVendasâ€].sum() | Soma total
VÃ¡rias funÃ§Ãµes | df.groupby(â€œCidadeâ€)[â€œVendasâ€].agg([â€œmeanâ€,â€œsumâ€]) | MÃ©dia e soma
Agrupar por vÃ¡rias colunas | df.groupby([â€œCidadeâ€,â€œVendedorâ€])[â€œVendasâ€].sum() | Agrupamento duplo
Resetar Ã­ndice | .reset_index() | Volta ao formato de tabela
Ordenar resultado | .sort_values(ascending=False) | Organiza do maior ao menor
FunÃ§Ãµes diferentes em vÃ¡rias colunas | df.groupby(â€œCidadeâ€).agg({â€œVendasâ€:[â€œsumâ€,â€œmeanâ€],â€œVendedorâ€:â€œcountâ€}) | EstatÃ­sticas variadas
